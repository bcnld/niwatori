<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãã‚“ãªã«æ€–ã„ã‹ï¼Ÿé¶ã«çŠ¯ã•ã‚Œã‚‹ã®ãŒ</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-image: url('oppa4.jpg');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      animation: bgflash 0.2s infinite alternate;
    }

    @keyframes bgflash {
      0% { filter: brightness(1); }
      100% { filter: brightness(0.3); }
    }

     img {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: contain;
      display: none;
      animation: flash 0.1s infinite alternate; 
    }
    
     #startScreen {
      color: white;
      text-align: center;
      padding-top: 40vh;
      position: relative;
      z-index: 1000;
    }

    .enemy {
      position: absolute;
      width: 80px;
      height: auto;
      animation: rainbow 2s infinite linear;
      pointer-events: none;
    }

    .player {
      position: absolute;
      width: 60px;
      height: auto;
      z-index: 999;
      pointer-events: none;
    }

    @keyframes rainbow {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }

    #captureVideo {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 2000;
      display: none;
    }
  </style>
</head>
<body>
  <div id="startScreen">
    <h1>é¶ã‚’è¦‹ã‚‹å‹‡æ°—ãŒã‚ã‚Šã¾ã™ã‹ï¼ŸğŸ¥šğŸ¥š</h1>
  </div>

  <audio id="scream" src="oppa.wav"></audio>
  <audio id="bgm" src="oppa2.wav" loop></audio>
  <audio id="sound" src="oppa3.wav" loop></audio>
  <video id="captureVideo" src="oppa4.mp4" autoplay></video>

  <img id="player" class="player" src="dog.png" style="display: none;" />

  <script>
    const enemies = [];
    let gameRunning = true;

    document.body.addEventListener('click', () => {
      document.getElementById('startScreen').style.display = 'none';
      const scream = document.getElementById("scream");
      const bgm = document.getElementById("bgm");
      const sound = document.getElementById("sound");
      const player = document.getElementById("player");

      scream.volume = 1.0;
      bgm.volume = 1.0;
      sound.volume = 1.0;

      scream.play();
      bgm.play();
      sound.play();

      player.style.display = 'block';

      // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ãƒã‚¦ã‚¹ãƒ»ã‚¿ãƒƒãƒã§è¿½å¾“
      document.addEventListener("mousemove", (e) => {
        movePlayer(e.clientX, e.clientY);
      });
      document.addEventListener("touchmove", (e) => {
        if (e.touches.length > 0) {
          const touch = e.touches[0];
          movePlayer(touch.clientX, touch.clientY);
        }
      });

      function movePlayer(x, y) {
        player.style.left = (x - 30) + "px";
        player.style.top = (y - 30) + "px";
      }

      // æ•µã‚’è¿½åŠ 
      setInterval(() => {
        if (!gameRunning) return;
        const enemy = document.createElement("img");
        enemy.src = "dog.png";
        enemy.className = "enemy";
        enemy.style.left = Math.random() * window.innerWidth + "px";
        enemy.style.top = Math.random() * window.innerHeight + "px";
        document.body.appendChild(enemy);
        enemies.push(enemy);
      }, 500); // 1ç§’ã”ã¨ã«æ•µè¿½åŠ 

      // æ•µãŒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¿½ã„ã‹ã‘ã‚‹
      setInterval(() => {
        if (!gameRunning) return;
        const playerX = player.offsetLeft + 30;
        const playerY = player.offsetTop + 30;

        enemies.forEach(enemy => {
          const dx = playerX - (enemy.offsetLeft + 40);
          const dy = playerY - (enemy.offsetTop + 40);
          const dist = Math.sqrt(dx * dx + dy * dy);
          const moveX = (dx / dist) * 2;
          const moveY = (dy / dist) * 2;
          enemy.style.left = (enemy.offsetLeft + moveX) + "px";
          enemy.style.top = (enemy.offsetTop + moveY) + "px";

          // æ•ã¾ã£ãŸã‹ç¢ºèª
          if (Math.abs(dx) < 40 && Math.abs(dy) < 40) {
            gameOver();
          }
        });
      }, 30);

      function gameOver() {
        if (!gameRunning) return;
        gameRunning = false;

        bgm.pause();
        sound.pause();

        const video = document.getElementById("captureVideo");
        video.style.display = "block";
        video.play();
      }
    });
  </script>
</body>
</html>

